/**
 * Embed videos using AngularJS directives
 * @version v0.1.4 - 2013-02-22
 * @link 
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
angular.module("videosharing-embed",[]),angular.module("videosharing-embed").service("PlayerConfig",function(){"use strict";this.createInstance=function(e){var t=function(e){this.playerRegExp=e.playerRegExp,this.whitelist=e.whitelist,this.config={width:560,height:315,playerID:e.playerID,options:e.options},this.isPlayerFromURL=function(e){return e.match(this.playerRegExp)!=null}};return new t(e)}}),angular.module("videosharing-embed").factory("RegisteredPlayers",["PlayerConfig",function(e){"use strict";var t={youtube:{options:{autoplay:0,controls:1,loop:0},whitelist:["autoplay","controls","loop","playlist","rel"],playerID:"www.youtube.com/embed/",protocol:"http://",playerRegExp:/(http:\/\/|https:\/\/)www\.youtube\.com\/watch\?v=([A-Za-z0-9\-\_]+)/},youtubeNoCookie:{options:{autoplay:0,controls:1,loop:0},whitelist:["autoplay","controls","loop","playlist","rel"],playerID:"www.youtube-nocookie.com/embed/",protocol:"http://",playerRegExp:/(http:\/\/|https:\/\/)www\.youtube\-nocookie\.com\/watch\?v=([A-Za-z0-9\-\_]+)/},vimeo:{options:{autoplay:0,loop:0},whitelist:["autoplay","color","loop"],playerID:"player.vimeo.com/video/",protocol:"http://",playerRegExp:/(http:\/\/)vimeo\.com\/([A-Za-z0-9]+)/},dailymotion:{options:{autoPlay:0,logo:0},whitelist:["autoPlay","logo","forceQuality"],playerID:"www.dailymotion.com/embed/video/",protocol:"http://",playerRegExp:/(http:\/\/)www\.dailymotion\.com\/video\/([A-Za-z0-9]+)/}},n=[];return angular.forEach(t,function(t){n.push(e.createInstance(t))}),n}]),angular.module("videosharing-embed").directive("embedVideo",["$filter","RegisteredPlayers",function(e,t){"use strict";return{restrict:"A",template:'<iframe width="{{config.width}}" height="{{config.height}}" src="{{config.protocol}}{{config.playerID}}{{videoID}}{{config.options | videoOptions}}" frameborder="0"></iframe>',scope:{},replace:!0,link:function(n,r,i){var s=i.href,o=null;angular.forEach(t,function(e){e.isPlayerFromURL(s)&&(o=e)}),n.videoID=s.match(o.playerRegExp)[2],n.config=o.config,n.config.height=i.height&&parseInt(i.height)||n.config.height,n.config.width=i.width&&parseInt(i.width)||n.config.width,n.config.protocol=s.match(o.playerRegExp)[1],angular.forEach(e("whitelist")(i,o.whitelist),function(e,t){n.config.options[t]=e})}}}]),angular.module("videosharing-embed").filter("videoOptions",function(){"use strict";return function(e){var t=[];return angular.forEach(e,function(e,n){t.push([n,e].join("="))}),"?"+t.join("&")}}),angular.module("videosharing-embed").filter("whitelist",function(){"use strict";return function(e,t){var n={};return angular.forEach(e,function(e,r){t.indexOf(r)!=-1&&(n[r]=e)}),n}});